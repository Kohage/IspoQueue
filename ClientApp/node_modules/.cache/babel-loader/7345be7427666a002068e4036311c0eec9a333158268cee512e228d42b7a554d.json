{"ast":null,"code":"import _slicedToArray from\"G:/Diplom/IspoQueue/ClientApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Container}from'reactstrap';import Button from'../Button/index.tsx';import NextImage from'../../public/Next.svg';import styles from'../Display/display.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Operator(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isTimerActive=_useState2[0],setIsTimerActive=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),remainingTime=_useState4[0],setRemainingTime=_useState4[1];// Время в секундах (2 минуты)\nvar data=[{\"key\":\"П100\",\"serivce\":\"Заполнение заявления в личном кабинете\",\"status\":\"Завершен\"},{\"key\":\"K200\",\"serivce\":\"Заполнение заявления в личном кабинете\",\"status\":\"Активен\"},{\"key\":\"П200\",\"serivce\":\"Заполнение заявления в личном кабинете\",\"status\":\"В ожидании\"}];var queue=data.length>0?data.map(function(d){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:d.key}),/*#__PURE__*/_jsx(\"td\",{children:d.serivce}),/*#__PURE__*/_jsx(\"td\",{className:d.status==\"Завершен\"?styles.completed:d.status==\"Активен\"?styles.active:styles.waiting,children:d.status})]},d.key);}):/*#__PURE__*/_jsx(_Fragment,{});var textNext=function textNext(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0448\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"img\",{src:NextImage,width:40}),\"\\u0411\"]});};// Функция для запуска таймера\nvar startTimer=function startTimer(){setIsTimerActive(true);setRemainingTime(10);// Сброс времени на начальное значение\n};useEffect(function(){var timerInterval;// Если таймер активен и осталось время\nif(isTimerActive&&remainingTime>0){// Уменьшаем время каждую секунду\ntimerInterval=setTimeout(function(){setRemainingTime(function(prevTime){return prevTime-1;});},1000);}else{// Если время вышло или таймер неактивен, очищаем интервал\nclearInterval(timerInterval);setIsTimerActive(false);}// Очищаем интервал при размонтировании компонента\nreturn function(){return clearInterval(timerInterval);};},[isTimerActive,remainingTime]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u044B \\u043E\\u043F\\u0440\\u0435\\u0430\\u0442\\u043E\\u0440 \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0439 \\u0440\\u0430\\u0431\\u043E\\u0442\\u0430\\u0435\\u0442 \\u0441 \\u043E\\u0447\\u0435\\u0440\\u0435\\u0434\\u044E:\"}),/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:\"\\u043E\\u0447\\u0435\\u0440\\u0435\\u0434\\u044C 1\"})}),/*#__PURE__*/_jsx(Container,{className:\"w-50 m-0 p-0\",children:/*#__PURE__*/_jsxs(Button,{onClick:!isTimerActive?startTimer:undefined,next:true,children:[isTimerActive?\"\\u041E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438: \".concat(remainingTime,\" \\u0441\\u0435\\u043A.\"):\"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0448\\u0438\\u0439\",!isTimerActive&&/*#__PURE__*/_jsx(\"img\",{src:NextImage,width:35,className:\"mx-2\"})]})}),/*#__PURE__*/_jsxs(\"table\",{className:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u2116 \\u0442\\u0430\\u043B\\u043E\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u043A\\u043D\\u043E\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:queue})]})]});}export default Operator;","map":{"version":3,"names":["React","useEffect","useState","Container","Button","NextImage","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Operator","_useState","_useState2","_slicedToArray","isTimerActive","setIsTimerActive","_useState3","_useState4","remainingTime","setRemainingTime","data","queue","length","map","d","children","key","serivce","className","status","completed","active","waiting","textNext","src","width","startTimer","timerInterval","setTimeout","prevTime","clearInterval","onClick","undefined","next","concat","table"],"sources":["G:/Diplom/IspoQueue/clientapp/src/components/Operator/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Container } from 'reactstrap'\r\nimport Button from '../Button/index.tsx'\r\nimport NextImage from '../../public/Next.svg'\r\nimport styles from '../Display/display.module.css'\r\n\r\nfunction Operator() {\r\n    const [isTimerActive, setIsTimerActive] = useState(false);\r\n    const [remainingTime, setRemainingTime] = useState(10); // Время в секундах (2 минуты)\r\n    let data: { key: string, serivce: string, status: string }[] = [\r\n        { \"key\": \"П100\", \"serivce\": \"Заполнение заявления в личном кабинете\", \"status\": \"Завершен\" },\r\n        { \"key\": \"K200\", \"serivce\": \"Заполнение заявления в личном кабинете\", \"status\": \"Активен\" },\r\n        { \"key\": \"П200\", \"serivce\": \"Заполнение заявления в личном кабинете\", \"status\": \"В ожидании\" }\r\n    ];\r\n\r\n    const queue = data.length > 0 ? data.map((d) => {\r\n        return <tr key={d.key}>\r\n            <td>{d.key}</td>\r\n            <td>{d.serivce}</td>\r\n            <td className={d.status == \"Завершен\" ?\r\n                styles.completed : d.status == \"Активен\" ?\r\n                    styles.active : styles.waiting}>{d.status}</td>\r\n        </tr>\r\n    }) : <></>\r\n\r\n    const textNext = () => {\r\n        return <>\r\n            <p>Следуюший</p>\r\n            <img src={NextImage} width={40}></img>Б\r\n        </>\r\n    }\r\n\r\n    // Функция для запуска таймера\r\n    const startTimer = () => {\r\n        setIsTimerActive(true);\r\n        setRemainingTime(10); // Сброс времени на начальное значение\r\n    };\r\n\r\n    useEffect(() => {\r\n        let timerInterval;\r\n\r\n        // Если таймер активен и осталось время\r\n        if (isTimerActive && remainingTime > 0) {\r\n            // Уменьшаем время каждую секунду\r\n            timerInterval = setTimeout(() => {\r\n                setRemainingTime((prevTime) => prevTime - 1);\r\n            }, 1000);\r\n        } else {\r\n            // Если время вышло или таймер неактивен, очищаем интервал\r\n            clearInterval(timerInterval);\r\n            setIsTimerActive(false);\r\n        }\r\n\r\n        // Очищаем интервал при размонтировании компонента\r\n        return () => clearInterval(timerInterval);\r\n    }, [isTimerActive, remainingTime]);\r\n\r\n    return (\r\n        <Container>\r\n            <h1>Вы опреатор который работает с очередю:</h1>\r\n            <ul>\r\n                <li>очередь 1</li>\r\n            </ul>\r\n            <Container className='w-50 m-0 p-0'>\r\n                <Button onClick={!isTimerActive ? startTimer : undefined} next>\r\n                    {isTimerActive ? `Осталось времени: ${remainingTime} сек.` : `Следуюший`}\r\n                    {!isTimerActive && <img src={NextImage} width={35} className='mx-2'></img>}\r\n                </Button>\r\n            </Container>\r\n            <table className={styles.table}>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>№ талона</th>\r\n                            <th>Кабинет</th>\r\n                            <th>Окно</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {queue}\r\n                    </tbody>\r\n                </table>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Operator"],"mappings":"mHAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,YAAY,CACtC,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,SAAS,KAAM,uBAAuB,CAC7C,MAAO,CAAAC,MAAM,KAAM,+BAA+B,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAElD,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAChB,IAAAC,SAAA,CAA0CZ,QAAQ,CAAC,KAAK,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAlDG,aAAa,CAAAF,UAAA,IAAEG,gBAAgB,CAAAH,UAAA,IACtC,IAAAI,UAAA,CAA0CjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/CE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IAAkB;AACxD,GAAI,CAAAG,IAAwD,CAAG,CAC3D,CAAE,KAAK,CAAE,MAAM,CAAE,SAAS,CAAE,wCAAwC,CAAE,QAAQ,CAAE,UAAW,CAAC,CAC5F,CAAE,KAAK,CAAE,MAAM,CAAE,SAAS,CAAE,wCAAwC,CAAE,QAAQ,CAAE,SAAU,CAAC,CAC3F,CAAE,KAAK,CAAE,MAAM,CAAE,SAAS,CAAE,wCAAwC,CAAE,QAAQ,CAAE,YAAa,CAAC,CACjG,CAED,GAAM,CAAAC,KAAK,CAAGD,IAAI,CAACE,MAAM,CAAG,CAAC,CAAGF,IAAI,CAACG,GAAG,CAAC,SAACC,CAAC,CAAK,CAC5C,mBAAOjB,KAAA,OAAAkB,QAAA,eACHpB,IAAA,OAAAoB,QAAA,CAAKD,CAAC,CAACE,GAAG,CAAK,CAAC,cAChBrB,IAAA,OAAAoB,QAAA,CAAKD,CAAC,CAACG,OAAO,CAAK,CAAC,cACpBtB,IAAA,OAAIuB,SAAS,CAAEJ,CAAC,CAACK,MAAM,EAAI,UAAU,CACjC1B,MAAM,CAAC2B,SAAS,CAAGN,CAAC,CAACK,MAAM,EAAI,SAAS,CACpC1B,MAAM,CAAC4B,MAAM,CAAG5B,MAAM,CAAC6B,OAAQ,CAAAP,QAAA,CAAED,CAAC,CAACK,MAAM,CAAK,CAAC,GAL3CL,CAAC,CAACE,GAMd,CAAC,CACT,CAAC,CAAC,cAAGrB,IAAA,CAAAI,SAAA,GAAI,CAAC,CAEV,GAAM,CAAAwB,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACnB,mBAAO1B,KAAA,CAAAE,SAAA,EAAAgB,QAAA,eACHpB,IAAA,MAAAoB,QAAA,CAAG,wDAAS,CAAG,CAAC,cAChBpB,IAAA,QAAK6B,GAAG,CAAEhC,SAAU,CAACiC,KAAK,CAAE,EAAG,CAAM,CAAC,SAC1C,EAAE,CAAC,CACP,CAAC,CAED;AACA,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACrBrB,gBAAgB,CAAC,IAAI,CAAC,CACtBI,gBAAgB,CAAC,EAAE,CAAC,CAAE;AAC1B,CAAC,CAEDrB,SAAS,CAAC,UAAM,CACZ,GAAI,CAAAuC,aAAa,CAEjB;AACA,GAAIvB,aAAa,EAAII,aAAa,CAAG,CAAC,CAAE,CACpC;AACAmB,aAAa,CAAGC,UAAU,CAAC,UAAM,CAC7BnB,gBAAgB,CAAC,SAACoB,QAAQ,QAAK,CAAAA,QAAQ,CAAG,CAAC,GAAC,CAChD,CAAC,CAAE,IAAI,CAAC,CACZ,CAAC,IAAM,CACH;AACAC,aAAa,CAACH,aAAa,CAAC,CAC5BtB,gBAAgB,CAAC,KAAK,CAAC,CAC3B,CAEA;AACA,MAAO,kBAAM,CAAAyB,aAAa,CAACH,aAAa,CAAC,GAC7C,CAAC,CAAE,CAACvB,aAAa,CAAEI,aAAa,CAAC,CAAC,CAElC,mBACIX,KAAA,CAACP,SAAS,EAAAyB,QAAA,eACNpB,IAAA,OAAAoB,QAAA,CAAI,8MAAuC,CAAI,CAAC,cAChDpB,IAAA,OAAAoB,QAAA,cACIpB,IAAA,OAAAoB,QAAA,CAAI,8CAAS,CAAI,CAAC,CAClB,CAAC,cACLpB,IAAA,CAACL,SAAS,EAAC4B,SAAS,CAAC,cAAc,CAAAH,QAAA,cAC/BlB,KAAA,CAACN,MAAM,EAACwC,OAAO,CAAE,CAAC3B,aAAa,CAAGsB,UAAU,CAAGM,SAAU,CAACC,IAAI,MAAAlB,QAAA,EACzDX,aAAa,iGAAA8B,MAAA,CAAwB1B,aAAa,iFAAqB,CACvE,CAACJ,aAAa,eAAIT,IAAA,QAAK6B,GAAG,CAAEhC,SAAU,CAACiC,KAAK,CAAE,EAAG,CAACP,SAAS,CAAC,MAAM,CAAM,CAAC,EACtE,CAAC,CACF,CAAC,cACZrB,KAAA,UAAOqB,SAAS,CAAEzB,MAAM,CAAC0C,KAAM,CAAApB,QAAA,eACvBpB,IAAA,UAAAoB,QAAA,cACIlB,KAAA,OAAAkB,QAAA,eACIpB,IAAA,OAAAoB,QAAA,CAAI,6CAAQ,CAAI,CAAC,cACjBpB,IAAA,OAAAoB,QAAA,CAAI,4CAAO,CAAI,CAAC,cAChBpB,IAAA,OAAAoB,QAAA,CAAI,0BAAI,CAAI,CAAC,EACb,CAAC,CACF,CAAC,cACRpB,IAAA,UAAAoB,QAAA,CACKJ,KAAK,CACH,CAAC,EACL,CAAC,EACL,CAAC,CAEpB,CAEA,cAAe,CAAAX,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}